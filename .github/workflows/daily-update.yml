name: G羹nl羹k r羹n G羹ncelleme

on:
  schedule:
    # Her g羹n saat 04:00 ve 16:00'da (T羹rkiye saatiyle yakla覺k 07:00 ve 19:00) 癟al覺覺r
    - cron: '0 4,16 * * *'
  workflow_dispatch: # GitHub sitesinden butona basarak elle 癟al覺t覺rmak istersen

permissions:
  contents: write

jobs:
  scrape-and-update:
    runs-on: ubuntu-latest

    steps:
    - name: Depoyu ek (Checkout)
      uses: actions/checkout@v3

    - name: Node.js Kurulumu
      uses: actions/setup-node@v3
      with:
        node-version: '18'

    - name: Paketleri Y羹kle
      run: npm install

    - name: Scraper'覺 al覺t覺r
      run: node scraper-fixed.js
      # Dosya ad覺n覺n 'scraper-fixed.js' olduundan emin ol!

    - name: Deiiklikleri Kaydet ve G繹nder (Push)
      run: |
        git config --global user.name 'Otomatik Bot'
        git config --global user.email 'bot@noreply.github.com'
        git add public/trendyol_products.js public/trendyol_products.json
        git diff --quiet && git diff --staged --quiet || (git commit -m " G羹nl羹k Fiyat G羹ncellemesi" && git push)
